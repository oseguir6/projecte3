import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { insertTechnologySchema } from "@shared/schema";
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage
} from "@/components/ui/form";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";
import { Textarea } from "@/components/ui/textarea";
import { useState } from "react";

interface TechnologyFormProps {
  initialData?: {
    name: string;
    icon: string;
  };
  onSubmit: (data: any) => void;
  onCancel: () => void;
}

// Common technology SVG icons
const techIcons = {
  javascript: `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z"/></svg>`,
  typescript: `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"/></svg>`,
  react: `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><circle cx="12" cy="12" r="2"/><path d="m20.2 18.8c.7.3 1.3.4 1.8.4c1.6 0 2.8-.7 2.8-1.6c0-.9-1.2-1.6-2.8-1.6c-.5 0-1.1.1-1.8.4c-.8 1.1-1.6 2.1-2.7 2.9c.6.4 1.2.5 1.7.5zm-16.4 0c.5 0 1.1-.1 1.7-.5c-1.1-.8-1.9-1.8-2.7-2.9c-.7-.3-1.3-.4-1.8-.4c-1.6 0-2.8.7-2.8 1.6c0 .9 1.2 1.6 2.8 1.6c.5 0 1.1-.1 1.8-.4zm16.4-13.6c-.7-.3-1.3-.4-1.8-.4c-.5 0-1.1.1-1.7.5c1.1.8 1.9 1.8 2.7 2.9c.7.3 1.3.4 1.8.4c1.6 0 2.8-.7 2.8-1.6c0-.9-1.2-1.6-2.8-1.6zm-16.4 0c-1.6 0-2.8.7-2.8 1.6c0 .9 1.2 1.6 2.8 1.6c.5 0 1.1-.1 1.8-.4c.8-1.1 1.6-2.1 2.7-2.9c-.6-.4-1.2-.5-1.7-.5zm8.2 5.5c.9.5 1.9.8 3.1.8s2.2-.3 3.1-.8c-.9-1.3-2.1-2.4-3.1-2.4s-2.2 1.1-3.1 2.4zm-3.1-.8c1.2 0 2.2-.3 3.1-.8c-.9-1.3-2.1-2.4-3.1-2.4s-2.2 1.1-3.1 2.4c.9.5 1.9.8 3.1.8zm6.2 5.6c-1 0-2.2-1.1-3.1-2.4c-.9.5-1.9.8-3.1.8s-2.2-.3-3.1-.8c.9 1.3 2.1 2.4 3.1 2.4s2.2-1.1 3.1-2.4c.9.5 1.9.8 3.1.8z"/></svg>`,
  nodejs: `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M11.998 24c-.321 0-.641-.084-.922-.247l-2.936-1.737c-.438-.245-.224-.332-.08-.383.585-.203.703-.25 1.328-.6.065-.037.151-.023.218.017l2.256 1.339c.082.045.197.045.272 0l8.795-5.076c.082-.047.134-.141.134-.238V6.921c0-.099-.053-.192-.137-.242l-8.791-5.072c-.081-.047-.189-.047-.271 0L3.075 6.68C2.99 6.729 2.936 6.825 2.936 6.921v10.15c0 .097.054.189.139.235l2.409 1.392c1.307.654 2.108-.116 2.108-.89V7.787c0-.142.114-.253.255-.253h1.114c.139 0 .255.112.255.253v10.021c0 1.745-.95 2.745-2.604 2.745-.508 0-.909 0-2.026-.551L2.28 18.675c-.57-.329-.922-.94-.922-1.604V6.921c0-.665.352-1.276.922-1.603L11.077.242C11.702-.079 12.298-.079 12.922.242l8.795 5.076c.57.327.923.938.923 1.603v10.15c0 .664-.353 1.275-.923 1.604l-8.795 5.076c-.28.163-.599.247-.924.247z"/></svg>`,
  python: `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M14.25.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98l-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09-.33.22zM21.1 6.11l.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25l-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08-.33.23z"/></svg>`,
  java: `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M8.851 18.56s-.917.534.653.714c1.902.218 2.874.187 4.969-.211 0 0 .552.346 1.321.646-4.699 2.013-10.633-.118-6.943-1.149M8.276 15.933s-1.028.761.542.924c2.032.209 3.636.227 6.413-.308 0 0 .384.389.987.602-5.679 1.661-12.007.13-7.942-1.218M13.116 11.475c1.158 1.333-.304 2.533-.304 2.533s2.939-1.518 1.589-3.418c-1.261-1.772-2.228-2.652 3.007-5.688 0-.001-8.216 2.051-4.292 6.573M19.33 20.504s.679.559-.747.991c-2.712.822-11.288 1.069-13.669.033-.856-.373.75-.89 1.254-.998.527-.114.828-.093.828-.093-.953-.671-6.156 1.317-2.643 1.887 9.58 1.553 17.462-.7 14.977-1.82M9.292 13.21s-4.362 1.036-1.544 1.412c1.189.159 3.561.123 5.77-.062 1.806-.152 3.618-.477 3.618-.477s-.637.272-1.098.587c-4.429 1.165-12.986.623-10.522-.568 2.082-1.006 3.776-.892 3.776-.892M17.116 17.584c4.503-2.34 2.421-4.589.968-4.285-.355.074-.515.138-.515.138s.132-.207.385-.297c2.875-1.011 5.086 2.981-.928 4.562 0-.001.07-.062.09-.118M14.401 0s2.494 2.494-2.365 6.33c-3.896 3.077-.888 4.832-.001 6.836-2.274-2.053-3.943-3.858-2.824-5.539 1.644-2.469 6.197-3.665 5.19-7.627M9.734 23.924c4.322.277 10.959-.153 11.116-2.198 0 0-.302.775-3.572 1.391-3.688.694-8.239.613-10.937.168 0-.001.553.457 3.393.639"/></svg>`,
  html: `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm7.031 9.75l-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531z"/></svg>`,
  css: `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0zm17.09 4.413L5.41 4.41l.213 2.622 10.125.002-.255 2.716h-6.64l.24 2.573h6.182l-.366 3.523-2.91.804-2.956-.81-.188-2.11h-2.61l.29 3.855L12 19.288l5.373-1.53L18.59 4.414z"/></svg>`,
  git: `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.548-.78-.465-1.774.059-2.533L8.197 3.288l-7.744 7.746c-.603.604-.603 1.582 0 2.184l10.478 10.479c.604.604 1.582.604 2.188 0l10.429-10.430c.603-.602.603-1.582 0-2.183z"/></svg>`,
  docker: `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-5.43h2.118a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.186m0 2.716h2.118a.187.187 0 00.186-.186V6.29a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.186m-2.93 0h2.12a.186.186 0 00.184-.186V6.29a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.186m-2.964 0h2.119a.186.186 0 00.185-.186V6.29a.185.185 0 00-.185-.185H5.136a.186.186 0 00-.186.185v1.888c0 .102.084.185.186.186m5.893 2.715h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.93 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.083.185.185.185m-2.964 0h2.119a.185.185 0 00.185-.185V9.006a.185.185 0 00-.184-.186h-2.12a.186.186 0 00-.186.186v1.887c0 .102.084.185.186.185m-2.92 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.082.185.185.185M23.763 9.89c-.065-.051-.672-.51-1.954-.51-.338 0-.676.033-1.01.098-.31-1.476-1.283-2.132-1.428-2.225l-.29-.183-.183.29c-.365.572-.608 1.304-.617 2.075-.023 1.562.187 2.314.55 2.729.014.015.027.028.041.042-.226.16-.705.402-1.328.402H.785l-.027.305c-.131 1.543.096 3.162 1.415 4.514 1.134 1.176 2.83 1.826 4.917 1.826.592 0 1.18-.055 1.759-.157.972-.17 1.906-.512 2.692-1.043.247-.168.505-.367.705-.589.017-.019.038-.039.054-.059L11.543 20l.367-.027c.896-.065 1.731-.396 2.471-.955.18-.135.25-.23.315-.335l.15-.509.034-.31.048-.36-.046-.408h.053c.596 0 1.097-.26 1.45-.607.24-.236.42-.52.532-.823l.078-.21-.36-.24"/></svg>`,
  mongodb: `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M17.193 9.555c-1.264-5.58-4.252-7.414-4.573-8.115-.28-.394-.53-.954-.735-1.44-.036.495-.055.685-.523 1.184-.723.566-4.438 3.682-4.74 10.02-.282 5.912 4.27 9.435 4.888 9.884l.07.05A73.49 73.49 0 0111.91 24h.481c.114-1.032.284-2.056.51-3.07.417-.296.604-.463.85-.693a11.342 11.342 0 003.639-8.464c.01-.814-.103-1.662-.197-2.218zm-5.336 8.195s0-8.291.275-8.29c.213 0 .49 10.695.49 10.695-.381-.045-.765-1.76-.765-2.405z"/></svg>`,
  mysql: `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M16.405 5.501c-.115 0-.193.014-.274.033v.013h.014c.054.104.146.18.214.274.054.107.1.214.154.32l.014-.015c.094-.066.14-.172.14-.333-.04-.047-.046-.094-.08-.14-.04-.067-.126-.1-.18-.153zM5.77 18.695h-.927a50.854 50.854 0 00-.27-4.41h-.008l-1.41 4.41H2.45l-1.4-4.41h-.01a72.892 72.892 0 00-.195 4.41H.002c.055-1.966.192-3.81.41-5.53h1.15l1.335 4.064h.008l1.347-4.064h1.095c.242 1.72.378 3.564.433 5.53zM9.862 18.695h-.918a73.912 73.912 0 00.33-4.633c-.762.24-1.697.403-2.792.49v-.524c1.606-.132 2.746-.35 3.4-.654zM6.648 17.898c.026-.016.055-.024.08-.047-.906.17-1.848.26-2.826.27-.328 0-.672 0-1.032-.014v-.536c.36.03.718.044 1.076.044.738 0 1.57-.09 2.496-.27.205-.033.418-.07.647-.112l.372-.066c-.02-.312-.04-.631-.065-.957-.024-.315-.06-.634-.098-.958-.04-.324-.08-.651-.127-.981a50.892 50.892 0 00-.16-1.055.096.096 0 01-.014-.047c-.006 0-.014.015-.02.015-.24.6-.55 1.122-.926 1.570-.47.562-1.063.905-1.77 1.027-.473.08-.905.24-1.297.48v.044c.563-.174 1.096-.31 1.6-.405.425-.08.8-.24 1.127-.48.16-.12.34-.271.402-.405.906-.378 1.603-.24 2.05.415.24.36.345.78.424 1.26.04.24.055.493.06.747.01.434.006.87-.002 1.308-.014.987-.06 1.982-.18 2.982 0 .33.014.675.044 1.037.03.36.104.735.104 1.108H6.648zM24.001 17.942a.77.77 0 01-.084.298c-.065.17-.18.3-.332.39-.131.08-.283.131-.456.152l-.661.044c-.707.06-1.347.024-1.922-.105-.287-.066-.55-.165-.79-.297-.24-.132-.46-.297-.67-.5-.17-.166-.31-.35-.42-.553-.109-.202-.164-.417-.164-.643 0-.374.13-.711.39-.966.26-.254.572-.38.934-.38.228 0 .436.052.624.156.188.104.344.241.469.41.109.152.16.3.16.45 0 .132-.04.248-.12.348-.08.1-.19.15-.33.15-.109 0-.2-.04-.274-.12-.074-.08-.111-.18-.111-.3 0-.109.04-.2.12-.274.08-.074.18-.111.3-.111.109 0 .2.04.274.12v-.015c-.055-.055-.12-.082-.195-.082-.131 0-.24.06-.33.18-.09.12-.135.255-.135.405 0 .131.044.248.131.351.087.103.199.155.336.155.199 0 .351-.074.456-.222.104-.148.156-.33.156-.546 0-.2-.06-.39-.18-.57-.12-.18-.286-.33-.497-.45-.211-.12-.45-.18-.717-.18-.33 0-.615.09-.854.27-.24.18-.36.42-.36.72 0 .195.06.375.18.54.12.165.285.3.495.405.21.105.45.165.72.18.27.015.54-.015.81-.09.27-.075.51-.195.72-.36.21-.165.375-.375.495-.63.12-.255.18-.54.18-.855 0-.3-.06-.57-.18-.81-.12-.24-.285-.45-.495-.63-.21-.18-.45-.315-.72-.405-.27-.09-.54-.135-.81-.135-.33 0-.615.06-.854.18-.24.12-.42.285-.54.495-.12.21-.18.45-.18.72 0 .255.06.48.18.675.12.195.285.345.495.45.21.105.45.15.72.135.27-.015.54-.09.81-.225.27-.135.51-.315.72-.54.21-.225.375-.495.495-.81.12-.315.18-.66.18-1.035 0-.33-.06-.615-.18-.855-.12-.24-.285-.42-.495-.54-.21-.12-.45-.18-.72-.18-.27 0-.54.06-.81.18-.27.12-.51.285-.72.495-.21.21-.375.45-.495.72-.12.27-.18.555-.18.855 0 .3.06.57.18.81.12.24.285.42.495.54.21.12.45.18.72.18.3 0 .57-.06.81-.18s.42-.285.54-.495c.12-.21.18-.45.18-.72 0-.255-.06-.48-.18-.675-.12-.195-.285-.345-.495-.45-.21-.105-.45-.15-.72-.135-.255.015-.495.09-.72.225-.225.135-.405.315-.54.54-.135.225-.18.48-.135.765.045.285.165.54.36.765.195.225.45.375.765.45.315.075.645.045.99-.09.345-.135.645-.345.9-.63.255-.285.435-.645.54-1.08.105-.435.105-.915 0-1.44-.105-.525-.315-.975-.63-1.35-.315-.375-.72-.645-1.215-.81-.495-.165-1.065-.195-1.71-.09-.645.105-1.275.375-1.89.81-.615.435-1.095.975-1.44 1.62-.345.645-.48 1.38-.405 2.205.075.825.375 1.545.9 2.16.525.615 1.17 1.05 1.935 1.305.765.255 1.575.285 2.43.09.855-.195 1.635-.57 2.34-1.125.705-.555 1.23-1.26 1.575-2.115.345-.855.42-1.8.225-2.835-.195-1.035-.645-1.935-1.35-2.7-.705-.765-1.575-1.275-2.61-1.53-1.035-.255-2.115-.18-3.24.225-1.125.405-2.115 1.08-2.97 2.025-.855.945-1.395 2.085-1.62 3.42-.225 1.335-.075 2.7.45 4.095.525 1.395 1.35 2.58 2.475 3.555 1.125.975 2.46 1.665 4.005 2.07 1.545.405 3.15.375 4.815-.09 1.665-.465 3.195-1.35 4.59-2.655 1.395-1.305 2.46-2.955 3.195-4.95.735-1.995.9-4.17.495-6.525-.405-2.355-1.35-4.455-2.835-6.3-1.485-1.845-3.375-3.24-5.67-4.185-2.295-.945-4.815-1.245-7.56-.9-2.745.345-5.355 1.35-7.83 3.015-2.475 1.665-4.575 3.825-6.3 6.48-1.725 2.655-2.835 5.625-3.33 8.91-.495 3.285-.195 6.6.9 9.945 1.095 3.345 2.925 6.36 5.49 9.045 2.565 2.685 5.64 4.8 9.225 6.345 3.585 1.545 7.485 2.25 11.7 2.115 4.215-.135 8.415-1.08 12.6-2.835 4.185-1.755 7.965-4.185 11.34-7.29 3.375-3.105 6.045-6.75 8.01-10.935 1.965-4.185 3.06-8.73 3.285-13.635.225-4.905-.405-9.72-1.89-14.445-1.485-4.725-3.825-9.015-7.02-12.87-3.195-3.855-7.065-7.095-11.61-9.72C15.885.855 10.89-.39 5.625.03.36.45-4.395 2.235-8.64 5.385c-4.245 3.15-7.695 7.365-10.35 12.645-2.655 5.28-4.275 11.37-4.86 18.27-.585 6.9.075 14.085 1.98 21.555 1.905 7.47 5.025 14.55 9.36 21.24 4.335 6.69 9.675 12.735 16.02 18.135 6.345 5.4 13.455 9.81 21.33 13.23 7.875 3.42 16.275 5.535 25.2 6.345 8.925.81 17.985.225 27.18-1.755 9.195-1.98 17.985-5.475 26.37-10.485 8.385-5.01 15.975-11.385 22.77-19.125 6.795-7.74 12.435-16.665 16.92-26.775 4.485-10.11 7.455-20.97 8.91-32.58 1.455-11.61.945-23.535-1.53-35.775-2.475-12.24-7.065-23.925-13.77-35.055-6.705-11.13-15.3-21.345-25.785-30.645C154.755 5.22 142.785-1.575 129.51-6.615 116.235-11.655 102.06-14.7 87.885-15.75c-14.175-1.05-28.65-.15-43.425 2.7-14.775 2.85-28.95 7.65-42.525 14.4-13.575 6.75-26.1 15.225-37.575 25.425-11.475 10.2-21.6 21.825-30.375 34.875-8.775 13.05-15.975 27.225-21.6 42.525-5.625 15.3-9.45 31.35-11.475 48.15-2.025 16.8-1.95 33.9.225 51.3 2.175 17.4 6.525 34.5 13.05 51.3 6.525 16.8 15 32.775 25.425 47.925 10.425 15.15 22.5 29.1 36.225 41.85 13.725 12.75 28.725 24 45 33.75 16.275 9.75 33.45 17.7 51.525 23.85 18.075 6.15 36.675 10.275 55.8 12.375 19.125 2.1 38.4 1.95 57.825-.45 19.425-2.4 38.625-6.825 57.6-13.275 18.975-6.45 37.35-15.075 55.125-25.875 17.775-10.8 34.575-23.55 50.4-38.25 15.825-14.7 30.3-30.9 43.425-48.6 13.125-17.7 24.525-36.6 34.2-56.7 9.675-20.1 17.325-41.1 22.95-63 5.625-21.9 8.925-44.4 9.9-67.5.975-23.1-.075-46.35-3.15-69.75-3.075-23.4-8.25-46.35-15.525-68.85-7.275-22.5-16.725-44.1-28.35-64.8-11.625-20.7-25.2-40.05-40.725-58.05-15.525-18-32.625-34.35-51.3-49.05-18.675-14.7-38.55-27.45-59.625-38.25-21.075-10.8-42.975-19.35-65.625-25.65-22.65-6.3-45.675-10.05-69.075-11.25-23.4-1.2-46.8-.45-70.2 2.25-23.4 2.7-46.35 7.65-68.85 14.85-22.5 7.2-44.1 16.425-64.8 27.675-20.7 11.25-40.05 24.3-58.05 39.075-18 14.775-34.35 31.05-49.05 48.825-14.7 17.775-27.45 36.75-38.25 56.925-10.8 20.175-19.35 41.175-25.65 63-6.3 21.825-10.05 44.1-11.25 66.825-1.2 22.725-.45 45.45 2.25 68.175 2.7 22.725 7.65 44.85 14.85 66.375 7.2 21.525 16.425 42.075 27.675 61.725 11.25 19.65 24.3 38.025 39.075 55.125 14.775 17.1 31.05 32.55 48.825 46.35 17.775 13.8 36.75 25.65 56.925 35.55 20.175 9.9 41.175 17.55 63 23.25 21.825 5.7 44.1 9.15 66.825 10.35 22.725 1.2 45.45.45 68.175-2.25 22.725-2.7 44.85-7.65 66.375-14.85 21.525-7.2 42.075-16.425 61.725-27.675 19.65-11.25 38.025-24.3 55.125-39.075 17.1-14.775 32.55-31.05 46.35-48.825 13.8-17.775 25.65-36.75 35.55-56.925 9.9-20.175 17.55-41.175 23.25-63 5.7-21.825 9.15-44.1 10.35-66.825 1.2-22.725.45-45.45-2.25-68.175z"/></svg>`
};

export default function TechnologyForm({ initialData, onSubmit, onCancel }: TechnologyFormProps) {
  const [selectedIcon, setSelectedIcon] = useState(initialData?.icon || "");
  const form = useForm({
    resolver: zodResolver(insertTechnologySchema),
    defaultValues: initialData || {
      name: "",
      icon: ""
    }
  });

  const handleIconSelect = (iconSvg: string) => {
    setSelectedIcon(iconSvg);
    form.setValue("icon", iconSvg);
  };

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
        <FormField
          control={form.control}
          name="name"
          render={({ field }) => (
            <FormItem>
              <FormLabel className="text-white">Name</FormLabel>
              <FormControl>
                <Input
                  {...field}
                  className="bg-[#1A1A2E] border-[#16213E] text-white"
                />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />

        <FormField
          control={form.control}
          name="icon"
          render={({ field }) => (
            <FormItem>
              <FormLabel className="text-white">Icon</FormLabel>
              <FormControl>
                <div className="space-y-4">
                  {/* Icon Preview */}
                  {selectedIcon && (
                    <div className="flex items-center gap-2 p-3 bg-[#0A0A0A] rounded-lg border border-[#16213E]">
                      <div className="text-[#E94560]" dangerouslySetInnerHTML={{ __html: selectedIcon }} />
                      <span className="text-white/70">Preview</span>
                    </div>
                  )}
                  
                  {/* Predefined Icons */}
                  <div>
                    <label className="text-sm text-white/70 mb-2 block">Choose from common tech icons:</label>
                    <div className="grid grid-cols-6 gap-2">
                      {Object.entries(techIcons).map(([name, svg]) => (
                        <button
                          key={name}
                          type="button"
                          onClick={() => handleIconSelect(svg)}
                          className={`p-2 rounded border transition-all ${
                            selectedIcon === svg 
                              ? 'border-[#E94560] bg-[#E94560]/20' 
                              : 'border-[#16213E] hover:border-[#E94560]/50'
                          }`}
                          title={name}
                        >
                          <div className="text-[#E94560]" dangerouslySetInnerHTML={{ __html: svg }} />
                        </button>
                      ))}
                    </div>
                  </div>

                  {/* Custom SVG Input */}
                  <div>
                    <label className="text-sm text-white/70 mb-2 block">Or paste custom SVG:</label>
                    <Textarea
                      {...field}
                      value={selectedIcon}
                      onChange={(e) => {
                        setSelectedIcon(e.target.value);
                        field.onChange(e.target.value);
                      }}
                      className="bg-[#1A1A2E] border-[#16213E] text-white min-h-[100px]"
                      placeholder="Paste SVG icon code here"
                    />
                  </div>
                </div>
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />

        <div className="flex gap-4">
          <Button
            type="submit"
            className="bg-[#E94560] hover:bg-[#E94560]/90"
          >
            {initialData ? 'Update Technology' : 'Add Technology'}
          </Button>
          <Button
            type="button"
            variant="outline"
            onClick={onCancel}
            className="border-[#E94560] text-white hover:bg-[#E94560]/10"
          >
            Cancel
          </Button>
        </div>
      </form>
    </Form>
  );
}